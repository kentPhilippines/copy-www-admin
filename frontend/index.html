<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>站点管理系统</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/components/guide.css">
</head>
<body>
    <div id="app">
        <Guide v-if="showGuide" @complete="handleGuideComplete" />

        <div v-if="loading" class="loading-container">
            <div class="loading-spinner"></div>
            <div class="loading-text">系统加载中...</div>
        </div>

        <div v-else class="container">
            <div class="tabs">
                <div 
                    class="tab-item" 
                    :class="{ active: activeTab === 'sites' }"
                    @click="activeTab = 'sites'"
                >
                    站点管理
                </div>
                <div 
                    class="tab-item" 
                    :class="{ active: activeTab === 'servers' }"
                    @click="activeTab = 'servers'"
                >
                    服务器管理
                </div>
            </div>

            <div class="tab-content">
                <!-- 站点管理面板 -->
                <div v-show="activeTab === 'sites'" class="tab-pane">
                    <div class="header">
                        <button class="btn btn-primary" @click="showAddSiteDialog">添加站点</button>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>域名</th>
                                <th>状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="site in sites" :key="site.id">
                                <td>{{site.domain}}</td>
                                <td>
                                    <span class="status-tag" :class="site.status">
                                        {{site.status || '未知'}}
                                    </span>
                                </td>
                                <td>
                                    <div class="btn-group">
                                        <button class="btn btn-small btn-primary">配置</button>
                                        <button class="btn btn-small btn-danger">删除</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- 服务器管理面板 -->
                <div v-show="activeTab === 'servers'" class="tab-pane">
                    <div class="header">
                        <button class="btn btn-primary" @click="showAddServerDialog">添加服务器</button>
                    </div>
                    <div v-if="!servers.length" class="empty-state">
                        <div class="empty-icon">📦</div>
                        <h3>暂无服务器数据</h3>
                        <p>请先添加服务器并安装监控客户端</p>
                        <div class="install-command">
                            <p>客户端安装命令：</p>
                            <textarea 
                                readonly 
                                :value="clientInstallCommand"
                                class="command-text"
                            ></textarea>
                            <button class="btn btn-primary" @click="copyInstallCommand">
                                复制安装命令
                            </button>
                        </div>
                    </div>
                    <table v-else class="data-table">
                        <thead>
                            <tr>
                                <th>服务器名称</th>
                                <th>IP地址</th>
                                <th>状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="server in servers" :key="server.id">
                                <td>{{server.name}}</td>
                                <td>{{server.ip}}</td>
                                <td>
                                    <span class="status-tag" :class="server.status">
                                        {{server.status || '未知'}}
                                    </span>
                                </td>
                                <td>
                                    <div class="btn-group">
                                        <button class="btn btn-small btn-primary">监控</button>
                                        <button class="btn btn-small btn-success">执行命令</button>
                                        <button class="btn btn-small btn-info">查看日志</button>
                                        <button class="btn btn-small btn-danger">删除</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="/js/components/onboarding/Guide.js"></script>
    <script type="module" src="/js/app.js"></script>
</body>
</html> 